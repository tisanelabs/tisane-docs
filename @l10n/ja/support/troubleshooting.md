# トラブルシューティング
Tisane APIへのリクエストが失敗した場合、以下のエラーコードとトラブルシューティングの手順を確認してください。

## API呼び出しがエラーコード400（Bad Request）で失敗

通常、これは不正な形式または無効なリクエストボディを意味します。`/parse`と`/transform`では、入力コンテンツと有効な言語コードを指定する必要があります。

考えられる原因：

- 無効なJSON。文字列に未終了の文字列リテラルやエスケープされていないダブルクォートが含まれていないか確認してください。
- 無効な言語コード。言語モデルが存在し、属性名が正しいことを確認してください（`/parse` では`language`、`/transform`では`from`と`to`)。
- `content`要素の欠落

## API呼び出しがエラーコード401（Unauthorized）で失敗

これは、リクエストが認証に失敗したことを意味します。考えられる原因：

- 不正なAPIキー
  - `Ocp-Apim-Subscription-Key` HTTPヘッダーに正しいAPIキー値を必ず指定してください。

- レート制限超過
  - 各サブスクリプションプランにはレート制限があります。無料のCommunity Planのレート制限は、1分あたり10リクエストのみに設定されています（テストには十分ですが、ほとんどの用途の本番環境には不十分です）。[サブスクリプションプランページ](https://tisane.ai/subscription-plans/)でレート制限を確認してください。

- 月間クォータ超過
  - 月間クォータに達した場合は、[サブスクリプションプランページ](https://tisane.ai/subscription-plans/)でアップグレードをご検討ください。月間クォータに近づくと、複数の通知が送信されます。

## API呼び出しがエラーコード404で失敗

メソッド名が正しいことを確認し、動詞が正しいことを確認してください。例えば、操作に`POST`を使用している場合に`GET`を指定すると、ステータスコード404が返されます。

##  その他のエラーコード（Invalid JSONまたはMarkup Issues）

401以外のエラーが表示される場合は、JSONのフォーマットが不正であるか確認してください。

- ダブルクォートの適切なエスケープ
  - コンテンツにダブルクォート （`"`） が含まれている場合、適切にエスケープ（`\"`） しているか確認してください。

- マークアップコンテンツの送信の回避
  - Tisane APIは自然言語を処理するため、コンテンツとしてHTML、XML、またはJSONを送信すると問題が発生する可能性があります。
  - マークアップを送信する必要がある場合は、送信前に入力内容のサニタイズを行ってください。

##  APIキーの取得

**tl;dr**：開発者向けポータルにサインインし、プロフィールページからAPIキーを取得してください。

### 手順

1. [こちら](https://dev.tisane.ai/signin/)をクリックして、ご登録の認証情報でログインします。
2. アカウントをお持ちでない場合は、[こちら](https://dev.tisane.ai/signup/)から登録します。
3. 画面の右上にあるメニューをクリックして、「プロフィール」に移動するか、**[こちらのダイレクトリンク](https://dev.tisane.ai/profile)を使用します。
4. 「プライマリキー」または「セカンダリキー」で、「表示」をクリックしてAPIキーを表示します。******
5. アプリケーション内で、このキーを`Ocp-Apim-Subscription-Key` HTTPヘッダーとして指定します。

##  一般的なトラブルシューティングの手順

- APIキーを確認します。 
- サブスクリプションの制限を確認します
- 送信前にJSONフォーマットを検証します
- 入力内容のサニタイズを行い、任意のマークアップを削除します

## 期待する応答が得られていません

100%の精度を保証することはできませんが、ご不明な点がございましたら、[お問い合わせ](https://tisane.ai/contact-us/#support)ください。ご確認いたします。当社は、Tisaneの精度向上に継続的に取り組んでおり、お客様のご協力に感謝いたします。

## マークアップコンテンツ（HTMLまたはXML）からテキストを処理することはできますか？

以下の正規表現は、任意のプログラミング言語でテキストからHTMLタグを削除するために使用できる汎用的なものです。

`<[^>]+>`

- `<` → HTMLタグの**開始角括弧**と同等です。
- `[^>]+` → **タグ内の任意の文字（**`>`を除く）と同等です。
- `>` → HTMLタグの**閉じ角括弧**と同等です。
